<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>FreeSwitch ESL API</title>
  <!-- Bootstrap core CSS -->
  <link href="assets/css/bootstrap.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="assets/css/api.css" rel="stylesheet">
  <link href="assets/css/prism.css" rel="stylesheet">
  <link href="assets/css/sh.css" rel="stylesheet">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="assets/js/html5shiv.js"></script>
<script src="assets/js/respond.min.js"></script>
<![endif]-->
</head>
<body>
  <!-- Wrap all page content here -->
  <div id="wrap">

    <!-- Begin page content -->
    <div class="container">
      <div class="page-header">
        <h1>API REFERENCE</h1>
        <p>Here is a list of commands, all data is returned in JSON</p>
        <p> <strong>/user/:exten</strong> -> Returns Username <div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">{"msg":"Richard Genthner","error":false,"status":200}</code></pre></div></p>
        <p> <strong>/:queue/agents</strong> -> Returns All Agents in Given Queue <div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">{
    "msg": {
        "1003@default": {
            "name": "Sue Walker",
            "status": "Available",
            "state": "Receiving",
            "no_answer_count": "1",
            "calls_answered": "16",
            "extension": "1003@default",
            "queue": "queue1@default",
            "queue_state": "Offering",
            "level": "1",
            "position": "1"
        }
    },
    "error": false,
    "status": 200
}</code></pre></div></p>
        <p> <strong>/:queue/tiers</strong> -> Returns All Agent Tiers in Given Queue <div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">
{
    "msg": [
        {
            "queue": "queue1@default",
            "agent": "1006@default",
            "state": "No Answer",
            "level": "1",
            "position": "1"
        },
        {
            "queue": "queue1@default",
            "agent": "1002@default",
            "state": "No Answer",
            "level": "1",
            "position": "1"
        }
    ],
    "error": false,
    "status": 200
}
        </code></pre></div></p>
        <p> <strong>/:queue/callers</strong> -> Returns All Callerss in Given Queue<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">{
    "msg": [
        {
            "queue": "queue1@default",
            "system": "single_box",
            "uuid": "ce2a7a0c-2ada-11e3-86e3-b1e2db555261",
            "session_uuid": "cacd7fc6-2ada-11e3-86da-b1e2db555261",
            "cid_number": "+19162785621",
            "cid_name": "+19162785621",
            "system_epoch": "1380660500",
            "joined_epoch": "1380660500",
            "rejoined_epoch": "0",
            "bridge_epoch": "1380660522",
            "abandoned_epoch": "0",
            "base_score": "0",
            "skill_score": "0",
            "serving_agent": "1009@default",
            "serving_system": "single_box",
            "state": "Answered"
        }
    ],
    "error": false,
    "status": 200
}</code></pre></div></p>
        <p> <strong>/status</strong> -> Returns FreeSwitch Status<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">{{
    "msg": {
        "UP0years,
0days,
19hours,
34minutes,
45seconds,
898milliseconds,
829microseconds": "FreeSWITCH(Version1.2.13gitc26e2ec2013-09-1815: 05: 04Z)isready"
    },
    "error": false,
    "status": 200
}</code></pre></div></p><p><strong>/tiers</strong> -> Returns Teirs for all queues<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">{
    "msg": [
        {
            "queue": "queue2@default",
            "agent": "1002@default",
            "state": "Ready",
            "level": "1",
            "position": "1"
        },
        {
            "queue": "queue1@default",
            "agent": "1002@default",
            "state": "No Answer",
            "level": "1",
            "position": "1"
        }
    ],
    "error": false,
    "status": 200
}</code></pre></div></p>
        <p><strong>/create/extension</strong> (POST) requires the following JSON object -> Returns true or false<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">
{
    "access_key": "my super key here",
    "action":"reloadxml",
    "user_id": "9999",
    "params": {
        "password": "123",
        "vm-password": "1234",
        "vm-email-all-messages": "true",
        "vm-notify-mailto": "true",
        "vm-mailto": "john.doe@example.com",
        "vm-attach-file": "true",
        "vm-message-ext": "wav"
    },
    "variables": {
        "toll_allow": "domestic,international,local",
        "accountcode": "9999",
        "user_context": "default",
        "effective_caller_id_name": "John Doe",
        "effective_caller_id_number": "9999",
        "outbound_caller_id_name": "$${outbound_caller_name}",
        "outbound_caller_id_number": "$${outbound_caller_id}",
        "directory_full_name": "John Doe"
    }
}
        </code></pre></div></p><p><strong>/connect</strong> (POST) requires the following JSON object<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">
            
        </code></pre></div></p><p><strong>/voicemail/greeting</strong> (POST) requires the following JSON object<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">
{
    "access_key": "my super key",
    "exten": "1009",
    "greeting_number": "1"
}  
        </code></pre></div></p><p><strong>/validate/:queue</strong> -> pass queue name returns true or false<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">
{
        "validate": "true"
}
    </code></pre></div></p><p><strong>/calls</strong> -> Returns a JSON object of calls on the system<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">
{
    "msg": [
        {
            "uuid,direction,created,created_epoch,name,state,cid_name,cid_num,ip_addr,dest,presence_id,presence_data,callstate,callee_name,callee_num,callee_direction,call_uuid,hostname,sent_callee_name,sent_callee_num,b_uuid,b_direction,b_created,b_created_epoch,b_name,b_state,b_cid_name,b_cid_num,b_ip_addr,b_dest,b_presence_id,b_presence_data,b_callstate,b_callee_name,b_callee_num,b_callee_direction,b_sent_callee_name,b_sent_callee_num,call_created_epoch": "fb2e5b04-3c00-11e3-96f0-1ff78d1619a2,inbound,2013-10-23 12:34:26,1382546066,sofia/internal/1000@fsbox.example.com:5060,CS_EXECUTE,John Doe,1000,24.2.55.181,1000,1000@fsbox.example.com,,UNHOLD,Outbound Call,1003,SEND,fb2e5b04-3c00-11e3-96f0-1ff78d1619a2,fsbox.example.com,Outbound Call,1003,fb530f9e-3c00-11e3-970e-1ff78d1619a2,outbound,2013-10-23 12:34:26,1382546066,sofia/internal/sip:1000@10.122.1.152:56884,CS_EXCHANGE_MEDIA,John Doe<1000>,8243,24.2.55.181,8233,1000@fsbox.example.com,,UNHOLD,Outbound Call,1000,SEND,User<1000>,1000,1382546068"
        }
    ],
    "error": false,
    "status": 200
}
        </code></pre></div></p><p><strong>/tools/caller/:password/:cid</strong> -> Returns a JSON object of caller id information<div class="syntax-highlighter" rel="JSON"><pre><code class="language-javascript">
        {"msg":"WISCASSET,ME 2075558005","error":false,"status":200 }
        </code></pre></div></p>
      </div>
    </div>
  </div>
  <div id="footer">
    <div class="container">
      <p class="text-muted credit">FS ESL API Written by <a href="http://sendecho.in">Moose</a> @ <a href="http://symplicity.com">Symplicity</a> Powered by <a href="http://slimframework.com/">Slim PHP</a> and <a href="http://www.freeswitch.org">FreeSwitch</a></p>
    </div>
  </div>
  <script src="assets/js/prism.js" data-default-language="markup"></script>
</body>
</html>
